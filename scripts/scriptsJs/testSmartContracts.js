// var contractAddress = "0x3187fb860a045fd754551e47fec254b9b1f52da3";

// //console.log("Hash of vote");
// //web3.sha3("vote(string,string,uint256,uint256,uint256)")

// //console.log("Interface Contract");
// var contract061 = eth.contract([{"inputs":[],"name":"getTotalCandidatos","outputs":[{"internalType":"uint256","name":"total","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"pidCandidato","type":"string"},{"internalType":"uint256","name":"puf","type":"uint256"},{"internalType":"uint256","name":"pcmun","type":"uint256"}],"name":"getTotalVotosPorCandidato","outputs":[{"internalType":"uint256","name":"total","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"pidBu","type":"string"},{"internalType":"string","name":"pidCandidato","type":"string"},{"internalType":"uint256","name":"puf","type":"uint256"},{"internalType":"uint256","name":"pcmun","type":"uint256"},{"internalType":"uint256","name":"pvoteCount","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"}])

// console.log("Geth - Vote - SendTransaction");
// var vote = contract061.at(contractAddress).vote.sendTransaction("1","1",1,1,4,{from: eth.coinbase});
// console.log(vote);

// console.log("Geth - GetTotalCandidatos - SendTransaction");
// var getTotalCandidatos = contract061.at(contractAddress).getTotalCandidatos.sendTransaction({from: eth.coinbase});
// console.log(getTotalCandidatos);

// console.log("Geth - GetTotalCandidatos - Call");
// var getTotalCandidatosCall = contract061.at(contractAddress).getTotalCandidatos.call();
// console.log(getTotalCandidatosCall);

var smartelectionContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"getResult","outputs":[{"internalType":"uint256","name":"product","type":"uint256"},{"internalType":"uint256","name":"sum","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalCandidatos","outputs":[{"internalType":"uint256","name":"total","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"string","name":"pidCandidato","type":"string"},{"internalType":"uint256","name":"puf","type":"uint256"},{"internalType":"uint256","name":"pcmun","type":"uint256"}],"name":"getTotalVotosPorCandidato","outputs":[{"internalType":"uint256","name":"total","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"string","name":"pidBu","type":"string"},{"internalType":"string","name":"pidCandidato","type":"string"},{"internalType":"uint256","name":"puf","type":"uint256"},{"internalType":"uint256","name":"pcmun","type":"uint256"},{"internalType":"uint256","name":"pvoteCount","type":"uint256"}],"name":"vote","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"}]);
var smartelection = smartelectionContract.new(
   {
     from: web3.eth.accounts[0], 
     data: '0x608060405234801561001057600080fd5b5061103a806100206000396000f3fe608060405234801561001057600080fd5b506004361061005e576000357c0100000000000000000000000000000000000000000000000000000000900480634911c08e146100635780638225506414610081578063aa8b69fe146101f1575b600080fd5b61006b6102d4565b6040518082815260200191505060405180910390f35b6101ef600480360360a081101561009757600080fd5b81019080803590602001906401000000008111156100b457600080fd5b8201836020820111156100c657600080fd5b803590602001918460018302840111640100000000831117156100e857600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019064010000000081111561014b57600080fd5b82018360208201111561015d57600080fd5b8035906020019184600183028401116401000000008311171561017f57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019092919080359060200190929190803590602001909291905050506102e0565b005b6102be6004803603606081101561020757600080fd5b810190808035906020019064010000000081111561022457600080fd5b82018360208201111561023657600080fd5b8035906020019184600183028401116401000000008311171561025857600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192908035906020019092919080359060200190929190505050610a5a565b6040518082815260200191505060405180910390f35b60008080549050905090565b6103ed6001866040518082805190602001908083835b6020831061031957805182526020820191506020810190506020830392506102f6565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156103e35780601f106103b8576101008083540402835291602001916103e3565b820191906000526020600020905b8154815290600101906020018083116103c657829003601f168201915b5050505050610be2565b1561055657846001866040518082805190602001908083835b602083106104295780518252602082019150602081019050602083039250610406565b6001836020036101000a03801982511681845116808217855250505050505090500191505090815260200160405180910390206002019080519060200190610472929190610eb0565b50826001866040518082805190602001908083835b602083106104aa5780518252602082019150602081019050602083039250610487565b6001836020036101000a038019825116818451168082178552505050505050905001915050908152602001604051809103902060000181905550816001866040518082805190602001908083835b6020831061051b57805182526020820191506020810190506020830392506104f8565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600101819055505b600080905060008090505b6001876040518082805190602001908083835b602083106105975780518252602082019150602081019050602083039250610574565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600301805490508110156107205760006107046001896040518082805190602001908083835b6020831061061357805182526020820191506020810190506020830392506105f0565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600301838154811061065457fe5b90600052602060002090600202016000018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156106f95780601f106106ce576101008083540402835291602001916106f9565b820191906000526020600020905b8154815290600101906020018083116106dc57829003601f168201915b505050505088610bf6565b14156107135760019150610720565b8080600101915050610561565b508015610778576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401808060200182810382526030815260200180610fd66030913960400191505060405180910390fd5b6001866040518082805190602001908083835b602083106107ae578051825260208201915060208101905060208303925061078b565b6001836020036101000a0380198251168184511680821785525050505050509050019150509081526020016040518091039020600301604051806040016040528087815260200184815250908060018154018082558091505090600182039060005260206000209060020201600090919290919091506000820151816000019080519060200190610840929190610f30565b5060208201518160010155505050600080905060008090505b6000805490508110156109be5760006109286000838154811061087857fe5b90600052602060002090600402016000018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561091d5780601f106108f25761010080835404028352916020019161091d565b820191906000526020600020905b81548152906001019060200180831161090057829003601f168201915b505050505089610bf6565b1480156109525750856000828154811061093e57fe5b906000526020600020906004020160010154145b801561097b5750846000828154811061096757fe5b906000526020600020906004020160020154145b156109b157836000828154811061098e57fe5b906000526020600020906004020160030160008282540192505081905550600191505b8080600101915050610859565b5080610a51576000604051806080016040528088815260200187815260200186815260200185815250908060018154018082558091505090600182039060005260206000209060040201600090919290919091506000820151816000019080519060200190610a2e929190610f30565b506020820151816001015560408201518160020155606082015181600301555050505b50505050505050565b60008060008311159050600080851115905060008090505b600080549050811015610bd8576000610b4160008381548110610a9157fe5b90600052602060002090600402016000018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610b365780601f10610b0b57610100808354040283529160200191610b36565b820191906000526020600020905b815481529060010190602001808311610b1957829003601f168201915b505050505089610bf6565b1415610bcb578180610b7057508560008281548110610b5c57fe5b906000526020600020906004020160010154145b8015610ba157508280610ba057508460008281548110610b8c57fe5b906000526020600020906004020160020154145b5b15610bca5760008181548110610bb357fe5b906000526020600020906004020160030154840193505b5b8080600101915050610a72565b5050509392505050565b600060608290506000815114915050919050565b6000606083905060608390506000825190508082511015610c1657815190505b60008090505b81811015610e5657828181518110610c3057fe5b60200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916848281518110610ca857fe5b60200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161015610d46577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff945050505050610eaa565b828181518110610d5257fe5b60200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff1916848281518110610dca57fe5b60200101517f010000000000000000000000000000000000000000000000000000000000000090047f0100000000000000000000000000000000000000000000000000000000000000027effffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff19161115610e49576001945050505050610eaa565b8080600101915050610c1c565b50815183511015610e8c577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff9350505050610eaa565b815183511115610ea25760019350505050610eaa565b600093505050505b92915050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610ef157805160ff1916838001178555610f1f565b82800160010185558215610f1f579182015b82811115610f1e578251825591602001919060010190610f03565b5b509050610f2c9190610fb0565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10610f7157805160ff1916838001178555610f9f565b82800160010185558215610f9f579182015b82811115610f9e578251825591602001919060010190610f83565b5b509050610fac9190610fb0565b5090565b610fd291905b80821115610fce576000816000905550600101610fb6565b5090565b9056fe4170656e617320756d20766f746f20c3a9207065726d697469646f20706f7220626f6c6574696d2064652075726e612ea265627a7a72315820dbbc2ee4044755bfeed8b7cfe6f34aae219061b646ca6fb58f86f673667ceeb764736f6c63430005100032', 
     gas: '4700000'
}, function (e, contract){

    var count = 0;
    while (count < 100){
        console.log( "Esperando minerar, Mining: " + eth.mining);
        admin.sleep(2);
        var tran = eth.getTransactionReceipt(contract.transactionHash);
        if (tran && tran.contractAddress) {
            console.log("Contract mined! Address: " + tran.contractAddress);

            console.log(smartelectionContract.at(tran.contractAddress).getResult());
            smartelectionContract.at(tran.contractAddress).vote.sendTransaction("123","11a",1,3,7,{from: eth.coinbase}, function (e, transaction){
                    console.log("processing vote - " + transaction);
                    while (count < 100){
                        console.log("Esperando minerar 2, Mining: " + eth.mining);
                        admin.sleep(2);
                        var tran2 = eth.getTransactionReceipt(transaction);
                        if (tran2) {
                            console.log(smartelectionContract.at(tran.contractAddress).getResult());
                            console.log(smartelectionContract.at(tran.contractAddress).getTotalCandidatos());
                            console.log(smartelectionContract.at(tran.contractAddress).getTotalVotosPorCandidato("11a",0,0));
                            break;
                        }
                    }
             });

            break;
        }


    }
 })


//  var contractAbi = eth.contract(AbiOfContract);
// var myContract = contractAbi.at(contractAddress);
// // suppose you want to call a function named myFunction of myContract
// var getData = myContract.myFunction.getData("1","boy");//just parameters you pass to myFunction
// // And that is where all the magic happens
// web3.eth.sendTransaction({
//     to:ContractAddress,//contracts address
//     from:web3.eth.accounts[0],
//     data: getData,
//     value: web3.toWei(EtherAmount, 'ether')//EtherAmount=>how much ether you want to move
// },function (error, result){ 
//             if(!error){
//                 console.log(result);//transaction successful
//             } else{
//                 console.log(error);//transaction failed
//             }
//     });